
\section{Evaluation}
\label{sec:evaluation}

We evaluated 4 aspects of \ourtool's effectiveness, answering
the following research questions:

\begin{enumerate}
\item How accurate is \ourtool in diagnosing configuration errors
caused by software evolution? That is, what is the rank of the
actual root cause configuration option in \ourtool's output (Section~\ref{sec:accuracy})?

\item How long does it take for \ourtool to diagnose
a configuration error (Section~\ref{sec:timecost})?

\item How does \ourtool's effectiveness compare to
existing approaches (Section~\ref{sec:existing})?

\item How does \ourtool's effectiveness compare to
an alternative approach based on \todo{describe it} (Section~\ref{sec:alternative})?

\end{enumerate}

\subsection{Subject Programs}

We evaluated \ourtool on the \subjnum Java programs
described in our empirical study (Table~\ref{tab:subjects}).


\begin{table}[t]
\vspace{1mm}
\centering
\small{
\setlength{\tabcolsep}{.80\tabcolsep}
\begin{tabular}{|l||c|c|c|c|c|}
\hline
 Program & Old Version & New Version & $\Delta$LOC & \#Options \\
 \hline
 \hline
 1 &  &  &&   \\
 2 &  & & &  \\
 3 &  & & &  \\
 4 &  & & &  \\
 5 &  & & &  \\
 6 &  & & &  \\
 7 &  & & &  \\
\hline
\hline
\end{tabular}
}
\vspace{-2mm}
\Caption{{\label{tab:experiment-sub} All subject .... 
}
}
\end{table}

\subsubsection{Configuration Errors Across Versions}

\begin{table}[t]
\vspace{1mm}
\centering
\small{
\setlength{\tabcolsep}{.80\tabcolsep}
\begin{tabular}{|l||c|c|}
\hline
 Error ID& Program & Description\\
 \hline
 \hline
 1 &  &  \\
 2 &  &  \\
 3 &  &  \\
 4 &  &  \\
 5 &  &  \\
 6 &  &  \\
 7 &  &  \\
 8 &  &  \\
\hline
\hline
\end{tabular}
}
\vspace{-2mm}
\Caption{{\label{tab:errorlist} All errors ...
}
}
\end{table}

\input{program-table}

For each subject program, we manually examinated all
configuration-related changes listed in Table~\ref{tab:options},
and wrote a test driver that revealed different
behaviors on two corresponding versions for each configuration change.

We collected \errornum configuration errors caused by
software evolution. \todo{reasons of relatively few
errors}. First, we excluded option additions, since
those options are not available in the old version.
Second, we excluded option changes that are backward
compatible. Third, for such option changes, if the
new program version already identifies the potential
configuration errors by dumping explicit error messages,
we excluded them. No tool support is even needed
for this case.

We evaluated all configuration errors that we can reproduce;
we did not select only errors that \ourtool works well.
Table~\ref{tab:errors} lists all errors.

\subsection{Evaluation Procedure}

\subsection{Results}

\subsubsection{Diagnosis Accuracy}
\label{sec:accuracy}

\subsubsection{Performance of \ourtool}
\label{sec:timecost}

We measured \ourtool's performance in two ways:
the time cost of diagnosing an error and
the overhead introduced by instrumentation
in reproducing an error.

Table~\ref{tab:performance} shows the results.

\todo{to reduce the overhead, only instrument
every block}

\begin{table}[t]
\vspace{1mm}
\centering
\small{
\setlength{\tabcolsep}{.80\tabcolsep}
\begin{tabular}{|l||c|c||c|c|}
\hline
 Configuration & \multicolumn{2}{|c||}{Run-time Slowdown ($\times$)} & \multicolumn{2}{|c|}{\ourtool time (s)}\\
 \cline{2-5}
 Error ID& Old Version & New Version & Slicing & Suggestion\\
 \hline
 \hline
 1 &  &  & &  \\
 2 &  &  & & \\
 3 &  &  &  &\\
 4 &  &  & & \\
 5 &  &  & & \\
 6 &  &  & & \\
 7 &  &  & & \\
\hline
\hline
 Mean & & & & \\
\hline
\end{tabular}
}
\vspace{-2mm}
\Caption{{\label{tab:performance} \ourtool's
performance. The ``Run-time slow down'' column
shows the cost of reproducing the error in
an \ourtool-instrumented version of the subject program.
The ``\ourtool time (seconds)'' column shows
the time took by \ourtool to diagnose configuration errors.
For both columns, the mean is the geometric mean. 
}
}
\end{table}

\subsubsection{Comparison with Existing Approaches}
\label{sec:existing}

\todo{want to compare with ConfDiagnoser and ConfAnalyzer}

\subsubsection{Comparison with Alternative Approaches}
\label{sec:alternative}

\todo{use ConfDiagnoser's ranking, full slicing, no iterative slicing}

\todo{just identified changed cases...}

\subsection{Discussion}

\noindent \textbf{\textit{Threats to validity.}}

\vspace{1mm}
The use case for reproducing differences may not reflect
users.

\noindent \textbf{\textit{Experimental conclusions.}}
