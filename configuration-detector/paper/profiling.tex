This step instruments the tested program offline
by inserting code to monitor each affected predicate's outcome
at runtime.

The instrumentation step inserts 2 statements, one
before and one after each affected predicate. Take
the code in Figure~\ref{fig:example} as an example.
The predicate at line 312 is affected by
the configuration option \CodeIn{maxsize}. \ourtool inserts
one instrumentation statement before line 312 to
keep track of how often the predicate is evaluated, and
inserts another statement after line 312 to count how often
the predicate evaluated to true.


\begin{CodeOut}
\begin{alltt}
310. private ExecutableSequence createNewUniqueSequence() \ttlcb
311.   Sequence newSequence = ...; 
       \underline{incrExecCount("maxsize",}
                     \underline{"newSequence.size() > maxsize");}
312.   if (newSequence.size() > GenInputsAbstract.maxsize) \ttlcb
         \underline{incrTrueCount("maxsize",}
                       \underline{"newSequence.size() > maxsize");}
314.     return null;
      ...
319. \ttrcb
\end{alltt}
\end{CodeOut}


Executing the instrumented program produces an \textit{execution profile}, which
consists of a set of \textit{predicate profiles}.
Each predicate profile is a 4-tuple consisting of a configuration option,
one of its affected predicates, the predicate's execution count, and its evaluation results as recorded at runtime. For example,
suppose the predicate on line 312 has been executed 100 times, of which
30 times it is evaluated to true. \ourtool creates the following predicate
profile:

\noindent $\langle$ \CodeIn{maxsize}, \CodeIn{newSequence.size() > maxsize}, 100, 30$\rangle$.

\vspace{1mm}


%\ourtool expresses an execution as
%a predicate profile vector. 
As we show in the experiments (Section~\ref{sec:evaluation}),
such predicate profiles, although by no means complete in
recording the whole execution, do capture
sufficient information to reason about the causal effects of configurations
and how a configuration option relates to software's behavior, while
also imposing only moderate performance impact
on foreground applications.


%health as the results of executing a set of predicates.

%As we will show in the experiments~\cite{}, this profile
%provides valuable information about the
%program execution and can help validate a test suite
%or indicate the usage context of a function
%or other computation.

%A software user seeking on specific piece of
%information or aiming to verify a specific invariant
%and uninterested in any other facts about the code
%may be able to use xxx to advantage, but will not
%get as much from it as a programmer open to other,
%possibly valuable information.

