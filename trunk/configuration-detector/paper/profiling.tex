This step instruments the tested program offline
by inserting code to monitor each affected predicate's outcome
at runtime.

The instrumentation step simply inserts 2 statements
before and after each affected predicate to monitor
its behavior. Take
the code in Figure~\ref{fig:example} as an example.
The predicate at line 312 is affected by
the configuration option \CodeIn{maxsize}. \ourtool inserts
one instrumentation statement before line 312 to
keep track of the number of the predicate being evaluated, and
inserts another statement after line 312 to count the number
of the predicate being evaluated to true.


\begin{CodeOut}
\begin{alltt}
310. private ExecutableSequence createNewUniqueSequence() \ttlcb
311.   Sequence newSequence = ...; 
       \underline{incrExecCount("maxsize", "newSequence.size() > maxsize");}
312.   if (newSequence.size() > maxsize) \ttlcb
         \underline{incrTrueCount("maxsize", "newSequence.size() > maxsize");}
314.     return null;
      ...
319. \ttrcb
\end{alltt}
\end{CodeOut}


Executing the instrumented program
produces a trace, which consists of a set of \textit{predicate profiles}.
Each predicate profile corresponds to a pair of configuration option
and one of its affected predicates. A predicate profile also includes
the predicate's execution count and evaluation result as recorded at runtime. For example,
suppose the predicate on line 312 has been executed 100 times, in which
30 times it has been evaluated to true. \ourtool creates a predicate
profile to capture this observation as follows:

$\langle$ \CodeIn{``maxsize''}, \CodeIn{``newSequence.size() > maxsize''}, 100, 30$\rangle$ 

\vspace{1mm}


%\ourtool expresses an execution as
%a predicate profile vector. 
As we show in the experiments (Section~\ref{sec:evaluation}),
such predicate profiles, although by no mean complete in
recording the whole trace, do capture
sufficient information to reason about the causal effects of configurations
and how a configuration option relates to software's behavior, while
also imposing a moderate amount of performance impact
on foreground applications.


%health as the results of executing a set of predicates.

%As we will show in the experiments~\cite{}, this profile
%provides valuable information about the
%program execution and can help validate a test suite
%or indicate the usage context of a function
%or other computation.

%A software user seeking on specific piece of
%information or aiming to verify a specific invariant
%and uninterested in any other facts about the code
%may be able to use xxx to advantage, but will not
%get as much from it as a programmer open to other,
%possibly valuable information.

