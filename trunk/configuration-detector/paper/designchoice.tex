\begin{figure}[t]
\setlength{\tabcolsep}{.74\tabcolsep}
\small{
\begin{tabular}{|l|c|c||c|}
\hline
 Error ID. & \multicolumn{3}{|c|}{Rank of the Actual Root Cause} \\
  %& \multicolumn{3}{|c|}{Different Comparison Profile Selection Strategy} \\
\cline{2-4}
 Program & All Profiles& Random Selection&  Similarity-Based\\
 \hline
\hline
\multicolumn{4}{|l|}{Non-crashing errors}   \\
 \hline
 1. Randoop & 1 & 2 & 1\\
 2. Weka & 7 & 6 & 1\\
 3. JChord & 16 & 19 & 3\\
 4. Synoptic & 1 & 1 & 1\\
 5. Soot & 13 & 13 & 2\\
\hline
Average & 7.6 & 8.2 & 1.6 \\
\hline
\hline
\multicolumn{4}{|l|}{Crashing errors}   \\
\hline
 6. JChord & 1 & 1 &1\\
 7. JChord & 1 & 1 &1\\
 8. JChord & 17 & 17 &17\\
 9. JChord & 1 &  1&1\\
 10. JChord & 15 & 15 &15\\
 11. JChord & 16 & 16 &16\\
 12. JChord & 1 & 1 &1\\
 13. JChord & 25 & 25 &1\\
 14. JChord & 9 & 9 &9\\
\hline
Average & 9.4 & 9.4 & 6.7\\
\hline
\end{tabular}
}
\Caption{{\label{tab:selection} Comparison with different execution profile selection
strategies (Section~\ref{sec:choices}).
The last column ``Similarity-based'' is the selection strategy
used in \ourtool, and the data in that column is taken from Figure~\ref{tab:results}.}}
\end{figure}

We investigate the effects of:

\begin{itemize}
\item using traditional full slicing~\cite{Horwitz:1988} rather
than thin slicing~\cite{Sridharan:2007} in the Configuration
Propagation Analysis step (Section~\ref{sec:prop}) to compute the affected predicates.
Figure~\ref{tab:results}  (Column ``Full Slicing'') shows the results.
\item varying the comparison execution profiles from the pre-built database.
In particular, we compare the similarity-based selection strategy used in \ourtool
 (Section~\ref{sec:similar}) with two alternatives: selecting
all available profiles in the database, and
randomly selecting the same number of profiles as \ourtool uses from the database.
Figure~\ref{tab:selection} shows the results.
\end{itemize}


As shown in Figure~\ref{tab:results}  (Column ``Full Slicing''),
\ourtool achieves significantly less accurate diagnosis when using
full slicing. The primary reason is that full slicing includes
too many irrelevant statements that are only \textit{indirectly} affected by
a configuration option value but not pertinent to the task of
error diagnosis. In many cases, monitoring the control flow
of such indirectly-affected predicates and then linking their
behaviors to configuration options lead to low accuracy. Furthermore,
performing full slicing is much more expensive than thin slicing; in
our experiments, the standard full slicing algorithm ran out of
memory for Soot.

%Furthermore, modern programs typically rely heavily on well-tested data structures
%provided by standard libraries, whose internal details rarely
%the full slice presents far too much information for the task at hand.


As shown in Figure~\ref{tab:selection}, varying the comparison
strategy yields substantially different results,
depending on the application being analyzed.
%\todo{following sentence needs a rewrite}
Using all available execution profiles or randomly
selecting execution profiles is ineffective. This is because
such strategies cause \ourtool to report many irrelevant
differences between an undesired
execution and a dramatically different execution.
%, which will not be selected by \ourtool's similary-based selection strategy (Section~\ref{sec:similar}).
We also find diagnosing a crashing error is less sensitive 
to the comparison execution profiles than diagnosing a non-crashing error.
This is because crashing profiles are often much smaller, executing
fewer predicates before reaching the crashing points; and \ourtool
chops each correct execution profile before diagnosis (Section~\ref{sec:similar}).
Thus, many irrelevant differences have already been removed.

 %Comparing
%a crashing profile with a chopped correct execution profile (even
%by random selection) 



%in selecting similar
%comparison execution profiles$\blacksquare$ than diagnosing
%a crashing error.
%For the \crash crashing errors, the only difference yielded
%from using different profile selection strategies is on
%the error 13. $\blacksquare$
